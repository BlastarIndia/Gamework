<?xml version="1.0" encoding="UTF-8"?>
<scenario>
    <about>
        <!-- Základní informace o scénáři (zatím všechno string)
        	- title = název scénáře
        	- author = jméno autora/autorů
        	- version = verze scénáře
        	- duration = odhadovaná délka hraní
        	- difficulty = obtížnost hry
         -->
	    <title>Example scenario</title>
	    <author>Robert Pösel</author>
	    <version>0.0.1</version>
	    <location>Brno</location>
	    <duration>1h</duration>
	    <difficulty>Easy</difficulty>
    </about>
   
    <tasks>
        <!-- TODO -->
    </tasks>
    
    <messages>
        <message id="test" type="text" title="Testovací zpráva" value="messages/test.txt" />
        <message id="welcome" type="html" title="Welcome to game!" value="messages/welcome.html" />
        <message id="dead" type="text" title="Nyní jste mrtev" value="messages/dead.txt" />
    </messages>
    
    <areas>
        <!-- Definice oblastí na mapě.
        	- type:
        		- point (lat, long, radius)
        		- multipoint (vnořené pointy (lat,long)) 
         -->
        <area id="home" type="point" lat="49.1675242" lon="16.5827231" radius="20" />
        <area id="home2" type="sound" lat="49.1675242" lon="16.5827231" radius="10" value="sounds/.mp3" soundRadius="25" />
        <area id="albert" type="point" lat="49.1699164" lon="16.5821031" radius="15" />
        <area id="bohunice" type="multipoint">
            <point lat="49.1699244" lon="16.5750961" />
            <point lat="49.1705711" lon="16.5869978" />
            <point lat="49.1658472" lon="16.5864353" />
            <point lat="49.1647558" lon="16.5754808" />
        </area>
    </areas>
    
    <variables>
        <!--
        	Types:
        	- decimal (min, max, value)
        	- boolean (value)
         -->
        <variable id="health" type="decimal" min="0" max="100" value="100" title="Zdraví" />
        <variable id="nakoupeno" type="boolean" value="false" />
    </variables>
    
    <reactions>
        <!--
        	Types:
        	- sound (path to file) - TODO: hlasitost? zvuky od frameworku? Gamework:SHOT atd.
        	- vibrate (strength = 1-10)
        	- html (path to file)
        	- ...
        	- decrement
        	- increment
        	- set
        	- ...
        	- event (value GAME_START, GAME_WIN, GAME_LOSE, etc.)
        	- ...
        	- dialog (icon?, title?, message, buttons (and their reactions))
         -->
        <reaction id="zvuk1" type="sound" value="sounds/rooster.mp3" />
        <reaction id="vibrace" type="vibrate" value="50" />
        <reaction id="vibrace1" type="vibrate" value="100" />
        <reaction id="vibrace2" type="vibrate" value="500" />
        <reaction id="vibrace3" type="vibrate" value="800" />
        <reaction id="testmsg" type="message" value="test" />    
        
        <reaction id="zdravi" type="var_set" variable="health" value="50" />
        
        <reaction id="zraneni" type="multi">
            <reaction type="sound" value="sounds/rooster.mp3" />
        	<reaction type="vibrate" value="100" />
        	<reaction type="var_decrement" variable="health" value="20" />
        </reaction>
        
        <reaction id="start_hry" type="multi">
            <reaction type="event" value="GAME_START" />
            <reaction type="message" value="welcome" />
            <reaction type="task" value="sometask" />
        </reaction>
        
        <reaction id="vyhra" type="multi">
            <reaction type="vibrate" value="500" /> <!-- TODO: use pattern in value (100, 50, 100) -->
            <reaction type="sound" value="sounds/vyhra.mp3" />
            <reaction type="event" value="GAME_WIN" />
        </reaction>
        <reaction id="prohra" type="multi">
            <reaction type="vibrate" value="1400" /> <!-- TODO: use "reference" type to another reaction? -->
            <reaction type="message" value="dead" />
            <reaction type="sound" value="sounds/prohra.mp3" />
            <reaction type="event" value="GAME_LOSE" />
        </reaction>
        <reaction id="activity" type="activity" value="" />
        <reaction id="nakup" type="multi">
            <reaction type="sound" value="sounds/nakup.mp3" />
            <reaction type="var_set" variable="nakoupeno" value="true" />
        </reaction>
        
        <reaction id="tick_second" type="sound" value="sounds/tick.mp3" />
        <reaction id="tick_minute" type="sound" value="sounds/tick2.mp3" />
        
        <reaction id="message" type="message" value="test" />
    </reactions>
    
    <hooks>
        <!--
        	Types:
    		- area (area ID) - vstup nebo výstup do oblasti
    		- area_enter (area ID)
    		- area_leave (area ID)
    		- variable - změna hodnoty proměnné
    		- time (timestamp value) - nastání času
    		- qrcode/gps/photo/...?
       	 -->
        <hook type="variable" value="health">
            <!-- Trigger:
	        	- reaction = id reakce kterou spustí za předpokladu že:
	        	- conditions:
	        		- all = všechny vnořené podmínky musí být splněny
	        		- any = jakákoliv podmínka musí být splněná
	        		- none = bezpodmínečně se spustí (výchozí)
	        	- run:
	        		- always = spustí se vždy při výskytu události
	        		- <číslo> = počet spuštění, kolikrát se může spustit
         	-->
            <trigger reaction="prohra" conditions="ALL">
                <condition type="equals" value="0" />
            </trigger>
        </hook>
        <hook type="area_enter" value="albert">
            <!-- vstup do Albertu -->
            <trigger reaction="nakup" run="1" />
        </hook>
        <hook type="area_enter" value="home">
            <!-- návrat domů -->
            <trigger reaction="vyhra" conditions="ALL">
                <condition type="equals" variable="nakoupeno" value="true" />
            </trigger>
            <trigger reaction="prohra" condition="ALL">
                <condition type="equals" variable="nakoupeno" value="false" />
            </trigger>
        </hook>
        <hook type="time" value="second">            
           	<trigger reaction="tick_second" condition="ALL">
           		<condition type="greater" value="0" />
           	</trigger>
        </hook>
        <hook type="time" value="minute">
           	<trigger reaction="tick_minute" condition="ALL">
           		<condition type="greater" value="0" />
           	</trigger>
        </hook>
    </hooks>
    
</scenario>